{% extends 'student/base.html' %}
{% load static %}

{% block title %}Dashboard - Student{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/student/dashboard.css' %}">
{% endblock %}

{% block content %}
<!-- Content -->
<div class="stud-dash-content-wrapper">
    <!-- Sidebar Column -->
    <div class="stud-dash-sidebar-column">
        <div class="stud-dash-card">
            <div class="stud-dash-profile-header">
                <div class="stud-dash-profile-avatar">
                    {% if user.student and user.student.profile_photo %}
                    <img alt="{{ user.student.full_name }}" src="{{ user.student.profile_photo.url }}" />
                    {% else %}
                    <img alt="{{ user.get_full_name|default:user.username }}" src="https://ui-avatars.com/api/?name={{ user.get_full_name|default:user.username|urlencode }}&background=6b277e&color=fff&size=128" />
                    {% endif %}
                </div>
                <h2 class="stud-dash-profile-name">{{ user.get_full_name|default:user.username }}</h2>
            </div>
            <div class="stud-dash-profile-details">
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Registration No</span>
                    <span class="stud-dash-detail-value blue">{{ user.student.registration_number|default:"210903" }} <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></span>
                </div>
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Institute</span>
                    <span class="stud-dash-detail-value">{{ user.student.school.school_name|default:"Delhi Public School" }}</span>
                </div>
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Date of Admission</span>
                    <span class="stud-dash-detail-value">{{ user.student.admission_date|date:"d F, Y"|default:"21 November, 2025" }}</span>
                </div>
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Class</span>
                    <span class="stud-dash-detail-value blue">{{ user.student.class_name|default:"9" }} <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></span>
                </div>
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Family</span>
                    <span class="stud-dash-detail-value blue"><span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></span>
                </div>
                <div class="stud-dash-detail-row">
                    <span class="stud-dash-detail-label">Discount in Fee</span>
                    <span class="stud-dash-detail-value green">20 % <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></span>
                </div>
            </div>
        </div>

        <div class="stud-dash-stats-cards-container">
            <div class="stud-dash-card stud-dash-stats-overview-card">
                <div class="stud-dash-stats-card-glow"></div>
                <div class="stud-dash-stats-overview-header">
                    <div class="stud-dash-stats-content">
                        <h3 class="stud-dash-stats-label">
                            <span class="material-symbols-outlined stud-dash-stats-label-icon">school</span>
                            Total Registered Students
                        </h3>
                        <div class="stud-dash-stats-count-wrapper">
                            <p class="stud-dash-stats-count" id="studentCount">0</p>
                            <span class="stud-dash-stats-count-plus">+</span>
                        </div>
                        <p class="stud-dash-stats-subtitle">Active learners in the system</p>
                    </div>
                </div>
                <div class="stud-dash-stats-badge">
                    <span class="material-symbols-outlined">trending_up</span>
                    <span>All Active Students</span>
                </div>
            </div>
        </div>

        <!-- Quiz Widget -->
        <div class="stud-dash-card stud-dash-quiz-card">
            <div class="stud-dash-quiz-header">
                <div class="stud-dash-quiz-icon-wrapper">
                    <span class="material-symbols-outlined stud-dash-quiz-icon">quiz</span>
                </div>
                <div class="stud-dash-quiz-info">
                    <h4 class="stud-dash-quiz-title">Test Your Knowledge!</h4>
                    <p class="stud-dash-quiz-subtitle">Complete today's quiz and earn XP</p>
                </div>
            </div>

            <div class="stud-dash-quiz-stats">
                <div class="stud-dash-quiz-stat-item">
                    <span class="material-symbols-outlined stud-dash-quiz-stat-icon">verified</span>
                    <div>
                        <p class="stud-dash-quiz-stat-value">15/20</p>
                        <p class="stud-dash-quiz-stat-label">Completed</p>
                    </div>
                </div>
                <div class="stud-dash-quiz-stat-item">
                    <span class="material-symbols-outlined stud-dash-quiz-stat-icon">stars</span>
                    <div>
                        <p class="stud-dash-quiz-stat-value">750 XP</p>
                        <p class="stud-dash-quiz-stat-label">Total Earned</p>
                    </div>
                </div>
            </div>

            <div class="stud-dash-quiz-current">
                <div class="stud-dash-quiz-current-header">
                    <h5 class="stud-dash-quiz-current-title">Today's Quiz</h5>
                    <span class="stud-dash-quiz-badge new">NEW</span>
                </div>
                <p class="stud-dash-quiz-current-subject">
                    <span class="material-symbols-outlined">subject</span>
                    Mathematics - Algebra
                </p>
                <div class="stud-dash-quiz-progress-wrapper">
                    <div class="stud-dash-quiz-progress-info">
                        <span class="stud-dash-quiz-questions-count">10 Questions</span>
                        <span class="stud-dash-quiz-time">
                            <span class="material-symbols-outlined">timer</span>
                            15 min
                        </span>
                    </div>
                    <div class="stud-dash-quiz-reward">
                        <span class="material-symbols-outlined">workspace_premium</span>
                        +50 XP
                    </div>
                </div>
            </div>

            <button class="stud-dash-quiz-start-btn">
                <span class="material-symbols-outlined">play_arrow</span>
                Start Quiz
            </button>
        </div>
    </div>

    <!-- Main Column -->
    <div class="stud-dash-main-column">
        <!-- Gamification Card -->
        <div class="stud-dash-card stud-dash-gamification-card">
            <h3 class="stud-dash-gamification-title">Journey Progress</h3>

            <!-- XP Points Section -->
            <div class="stud-dash-xp-section">
                <div class="stud-dash-xp-header">
                    <span class="material-symbols-outlined stud-dash-xp-icon">stars</span>
                    <div>
                        <p class="stud-dash-xp-label">Experience Points</p>
                        <p class="stud-dash-xp-value">2,450 XP <span class="stud-dash-xp-label">level 5</span></p>
                    </div>
                </div>
                <div class="stud-dash-xp-progress">
                    <div class="stud-dash-xp-progress-bar">
                        <div class="stud-dash-xp-progress-fill" style="width: 65%;"></div>
                    </div>
                    <p class="stud-dash-xp-progress-text">1,550 XP to Level 6</p>
                </div>
            </div>

            <!-- Streak Section -->
            <div class="stud-dash-streak-section">
                <div class="stud-dash-streak-item">
                    <span class="material-symbols-outlined stud-dash-streak-icon fire">local_fire_department</span>
                    <div>
                        <p class="stud-dash-streak-value">7 Days</p>
                        <p class="stud-dash-streak-label">Current Streak</p>
                    </div>
                </div>
                <div class="stud-dash-streak-item">
                    <span class="material-symbols-outlined stud-dash-streak-icon trophy">emoji_events</span>
                    <div>
                        <p class="stud-dash-streak-value">21 Days</p>
                        <p class="stud-dash-streak-label">Best Streak</p>
                    </div>
                </div>
            </div>

            <!-- Badges Section -->
            <div class="stud-dash-badges-section">
                <div class="stud-dash-badges-header">
                    <h4 class="stud-dash-badges-title">Recent Badges</h4>
                    <a href="#" class="stud-dash-badges-link">View All <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></a>
                </div>
                <div class="stud-dash-badges-grid">
                    <div class="stud-dash-badge-item">
                        <span class="material-symbols-outlined stud-dash-badge-icon gold">military_tech</span>
                        <p class="stud-dash-badge-name">Top Performer</p>
                    </div>
                    <div class="stud-dash-badge-item">
                        <span class="material-symbols-outlined stud-dash-badge-icon silver">school</span>
                        <p class="stud-dash-badge-name">Quick Learner</p>
                    </div>
                    <div class="stud-dash-badge-item">
                        <span class="material-symbols-outlined stud-dash-badge-icon bronze">workspace_premium</span>
                        <p class="stud-dash-badge-name">Consistent</p>
                    </div>
                    <div class="stud-dash-badge-item locked">
                        <span class="material-symbols-outlined stud-dash-badge-icon">lock</span>
                        <p class="stud-dash-badge-name">Mystery</p>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div class="stud-dash-leaderboard-section">
                <div class="stud-dash-leaderboard-header">
                    <h4 class="stud-dash-leaderboard-title">Leaderboard Position</h4>
                    <span class="stud-dash-leaderboard-period">This Month</span>
                </div>
                <div class="stud-dash-leaderboard-rank">
                    <div class="stud-dash-rank-badge">
                        <span class="material-symbols-outlined stud-dash-rank-icon">leaderboard</span>
                        <span class="stud-dash-rank-number">#12</span>
                    </div>
                    <div class="stud-dash-rank-info">
                        <p class="stud-dash-rank-text">Out of 150 students</p>
                        <p class="stud-dash-rank-change positive">
                            <span class="material-symbols-outlined">trending_up</span>
                            +3 from last month
                        </p>
                    </div>
                </div>
                <a href="#" class="stud-dash-leaderboard-cta">
                    View Full Leaderboard
                    <span class="material-symbols-outlined">arrow_forward</span>
                </a>
            </div>
        </div>

        <!-- Reports Grid -->
        <div class="stud-dash-reports-grid">
            <!-- Attendance Report -->
            <div>
                <a href="#" class="stud-dash-report-link">
                    <div class="stud-dash-report-header">
                        <span class="stud-dash-report-number">1</span>
                        <h3 class="stud-dash-report-title">Attendance Report</h3>
                    </div>
                </a>
                <div class="stud-dash-card">
                    <div class="stud-dash-legend">
                        <span class="stud-dash-legend-item">
                            <span class="stud-dash-legend-dot blue"></span>P
                        </span>
                        <span class="stud-dash-legend-item">
                            <span class="stud-dash-legend-dot red"></span>A
                        </span>
                    </div>
                    <div class="stud-dash-charts-wrapper">
                        <div class="stud-dash-chart-container">
                            <svg class="stud-dash-rotate-90" width="120" height="120">
                                <circle cx="60" cy="60" fill="none" r="52" stroke="#fecaca" stroke-width="9"></circle>
                                <circle cx="60" cy="60" fill="none" r="52" stroke="#ef4444" stroke-dasharray="326.7" stroke-dashoffset="326.7" stroke-width="9"></circle>
                            </svg>
                            <div class="stud-dash-chart-label">
                                <span class="stud-dash-chart-percent">0%</span>
                                <span class="stud-dash-chart-text">Overall</span>
                            </div>
                        </div>
                        <div class="stud-dash-chart-container">
                            <svg class="stud-dash-rotate-90" width="120" height="120">
                                <circle cx="60" cy="60" fill="none" r="52" stroke="#fecaca" stroke-width="9"></circle>
                                <circle cx="60" cy="60" fill="none" r="52" stroke="#ef4444" stroke-dasharray="326.7" stroke-dashoffset="326.7" stroke-width="9"></circle>
                            </svg>
                            <div class="stud-dash-chart-label">
                                <span class="stud-dash-chart-percent">0%</span>
                                <span class="stud-dash-chart-text">Nov 2025</span>
                            </div>
                        </div>
                    </div>
                    <div class="stud-dash-stats-grid">
                        <div class="stud-dash-stat-card blue">
                            <p class="stud-dash-stat-label blue">PRESENTS</p>
                            <p class="stud-dash-stat-value blue">0</p>
                            <p class="stud-dash-stat-period blue">This Month <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></p>
                        </div>
                        <div class="stud-dash-stat-card red">
                            <p class="stud-dash-stat-label red">ABSENTS</p>
                            <p class="stud-dash-stat-value red">0</p>
                            <p class="stud-dash-stat-period red">This Month <span class="material-symbols-outlined stud-dash-align-middle">arrow_forward</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event Calendar -->
            <div>
                <a href="#" class="stud-dash-report-link">
                    <div class="stud-dash-report-header">
                        <span class="stud-dash-report-number">2</span>
                        <h3 class="stud-dash-report-title">Event Calendar</h3>
                    </div>
                </a>
                <div class="stud-dash-card stud-dash-calendar-card">
                    <!-- Calendar Header -->
                    <div class="stud-dash-calendar-header">
                        <div class="stud-dash-calendar-month">
                            <button class="stud-dash-calendar-nav-btn" id="prevMonth">
                                <span class="material-symbols-outlined">chevron_left</span>
                            </button>
                            <h4 class="stud-dash-calendar-month-title">November 2025</h4>
                            <button class="stud-dash-calendar-nav-btn" id="nextMonth">
                                <span class="material-symbols-outlined">chevron_right</span>
                            </button>
                        </div>
                        <button class="stud-dash-calendar-view-btn">
                            <span class="material-symbols-outlined">event</span>
                            View Full Calendar
                        </button>
                    </div>

                    <!-- Upcoming Events List -->
                    <div class="stud-dash-events-list">
                        <h5 class="stud-dash-events-title">Upcoming Events</h5>

                        <div class="stud-dash-event-item">
                            <div class="stud-dash-event-date">
                                <span class="stud-dash-event-day">22</span>
                                <span class="stud-dash-event-month">NOV</span>
                            </div>
                            <div class="stud-dash-event-details">
                                <h6 class="stud-dash-event-name">Science Fair Competition</h6>
                                <p class="stud-dash-event-time">
                                    <span class="material-symbols-outlined">schedule</span>
                                    10:00 AM - 2:00 PM
                                </p>
                                <p class="stud-dash-event-location">
                                    <span class="material-symbols-outlined">location_on</span>
                                    School Auditorium
                                </p>
                            </div>
                            <span class="stud-dash-event-badge academic">Academic</span>
                        </div>

                        <div class="stud-dash-event-item">
                            <div class="stud-dash-event-date">
                                <span class="stud-dash-event-day">25</span>
                                <span class="stud-dash-event-month">NOV</span>
                            </div>
                            <div class="stud-dash-event-details">
                                <h6 class="stud-dash-event-name">Parent-Teacher Meeting</h6>
                                <p class="stud-dash-event-time">
                                    <span class="material-symbols-outlined">schedule</span>
                                    9:00 AM - 12:00 PM
                                </p>
                                <p class="stud-dash-event-location">
                                    <span class="material-symbols-outlined">location_on</span>
                                    Class 9 Rooms
                                </p>
                            </div>
                            <span class="stud-dash-event-badge meeting">Meeting</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Newsletter -->
            <div>
                <a href="#" class="stud-dash-report-link">
                    <div class="stud-dash-report-header">
                        <span class="stud-dash-report-number">3</span>
                        <h3 class="stud-dash-report-title">Featured Newsletter</h3>
                    </div>
                </a>
                <div class="stud-dash-card stud-dash-newsletter-card">
                    <div class="stud-dash-newsletter-featured-badge">
                        <span class="material-symbols-outlined">auto_awesome</span>
                        Featured
                    </div>

                    <div class="stud-dash-newsletter-header">
                        <div class="stud-dash-newsletter-icon-wrapper">
                            <span class="material-symbols-outlined stud-dash-newsletter-icon">mail</span>
                        </div>
                        <div class="stud-dash-newsletter-meta">
                            <span class="stud-dash-newsletter-date">December 9, 2025</span>
                            <span class="stud-dash-newsletter-category">Monthly Edition</span>
                        </div>
                    </div>

                    <h4 class="stud-dash-newsletter-title">Student Success Stories</h4>

                    <button class="stud-dash-newsletter-read-btn">
                        Read Newsletter
                        <span class="material-symbols-outlined">arrow_forward</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/student/dashboard.js' %}"></script>
{% endblock %}
